# source this file to activate the shell+python environment

# sourcing kAFL env
source "{{ kafl_install_root }}/env.sh"

# override some kafl env vars
export KAFL_CONFIG_FILE="{{ install_root }}/bkc/kafl/kafl_config.yaml"
export KAFL_WORKDIR="/dev/shm/default"

# add CCC repo env vars
export BKC_ROOT="{{ install_root }}"
export LINUX_GUEST="{{ guest_root }}"
export LINUX_HOST=""
export TDVF_ROOT="{{ tdvf_root }}"
export SMATCH_ROOT="{{ smatch_root }}"
export TDVFUZZ_ROOT="{{ install_root }}"
export WORKDIR="{{ workdir }}"

# add bkc/kafl to PATH
export PATH="$PATH:$BKC_ROOT/bkc/kafl"
# add fast_matcher to PATH
export PATH="$PATH:{{ lookup('env', 'HOME') }}/.cargo/bin"

# set default `make` jobs
export MAKEFLAGS="-j$(nproc)"

# set tools env vars & add them to PATH
export CODEQL_ROOT="{{ codeql_bin_root }}"
export PEINFO_ROOT="{{ peinfo_root }}"
export GHIDRA_ROOT="{{ ghidra_root }}"
export PATH="$PATH:{{ codeql_bin_root }}"
export PATH="$PATH:{{ peinfo_root }}"
export PATH="$PATH:{{ ghidra_root }}"